---
title: "R Notebook"
output: html_document
---
## our goal of collecting a dataset about liver disease is to facilitate research and analysis about it. since liver disease is more common and can be fatal we are aiming to classify the patients and analyze the data and correlations between the data.

link to the source of our dataset: https://www.kaggle.com/uciml/indian-liver-patient-records

general info about the dataset:
it has 11 columns which are:
 age (numeric)
 gender (symmetric binary)
 Total_Bilirubin (numeric)
 direct_Bilirubin (numeric)
 Alkaline_Phosphotase (numeric)
 Alamine_Aminotransferase (numeric)
 Aspartate_Aminotransferase (numeric)
 Total_Protiens (numeric)
 Albumin (numeric)
 Albumin_and_Globulin_Ratio (numeric)
 Dataset (asymmetric binary)

 and has 583 objects
 and class label (dataset) which indicates (1 disease or 2 no disease)


## The getwd() function tells you what the current working directory is
 setwd function to change the directory you work on 
```{r}
getwd()
setwd("C:/Users/arwa_/OneDrive/المستندات/GitHub/datamining-project")
```
 
 
## Importing the dataset
 read file named "indian_liver_patient" and save it in dataframe named "dataset"
```{r}
dataset = read.csv("C:/Users/arwa_/OneDrive/المستندات/GitHub/datamining-project/dataset/indian_liver_patient.csv")
```


# Data analysis

 raw data and summary of the dataset
```{r}
View(dataset)
str(dataset)
summary(dataset)
```
we have 4 null values in Albumin_and_Globulin_Ratio column
we can also see there are some outliers

# Dealing with the missing values 
# Replace missing Data with mean since there is only four tuples with a missing value
```{r}
dataset$Albumin_and_Globulin_Ratio = ifelse(is.na(dataset$Albumin_and_Globulin_Ratio), ave(dataset$Albumin_and_Globulin_Ratio, FUN =function(x) mean(x,na.rm=TRUE)), dataset$Albumin_and_Globulin_Ratio)
sum(is.na(dataset))
```

# Stastical summaries
```{r}
summary(dataset$Age)
summary(dataset$Total_Bilirubin)
summary(dataset$Direct_Bilirubin)
summary(dataset$Alkaline_Phosphotase)
summary(dataset$Alamine_Aminotransferase)
summary(dataset$Aspartate_Aminotransferase)
summary(dataset$Total_Protiens)
summary(dataset$Albumin)
summary(dataset$Albumin_and_Globulin_Ratio)
```


# Data visualization

# Box plot for Age
```{r}
boxplot(dataset$Age, main = "Age", ylab = "Age")
```
the box plot shows no outliers

# Box plot for Total Bilirubin
```{r}
boxplot(dataset$Total_Bilirubin, main = "Total Bilirubin", ylab = "Total Bilirubin")
```
many outliers

# Box plot for Direct Bilirubin
```{r}
boxplot(dataset$Direct_Bilirubin, main = "Direct Bilirubin", ylab = "Direct Bilirubin")
```
there are many outliers

# Box plot for Alkaline Phosphotase
```{r}
boxplot(dataset$Alkaline_Phosphotase, main = "Alkaline Phosphotase", ylab = "Alkaline Phosphotase")
```
there are many outliers

# Box plot for Alamine Aminotransferase
```{r}
boxplot(dataset$Alamine_Aminotransferase, main = "Alamine Aminotransferase", ylab = "Alamine Aminotransferase")
```
there are many outliers

# Box plot for Aspartate Aminotransferase
```{r}
boxplot(dataset$Aspartate_Aminotransferase, main = "Aspartate Aminotransferase", ylab = "Aspartate Aminotransferase")
```
there are many outliers

# Box plot for Total Protiens
```{r}
boxplot(dataset$Total_Protiens, main = "Total Protiens", ylab = "Total Protiens")
```
the box plot shows some outliers but they are not too far from the max and min values so we will keep them as is

# Box plot for Albumin
```{r}
boxplot(dataset$Albumin, main = "Albumin", ylab="Albumin")
```
no outliers

```{r}
boxplot(dataset$Albumin_and_Globulin_Ratio, main = "Albumin and Globulin Ratio", ylab = "Albumin_and Globulin Ratio")
```
some outliers but they are close to the max value(not true outlier)

# Dealing with the missing values - Outliers 
although the box plots show some extreme outliers we will not be removing them. thats because, we don't know if they were entered by mistake. also according to a doctor those values are possible in liver disease patients,  and each patitents tests can vary greatly so we decided its best to keep those values as it will help the classification procedure. 



# Create a scatterplot
```{r}
 plot(dataset$Alamine_Aminotransferase, 
     dataset$Aspartate_Aminotransferase, 
     xlab = "Alamine Aminotransferase", 
     ylab = "Aspartate Aminotransferase",
     main = "Scatterplot of Alamine Aminotransferase vs. Aspartate Aminotransferase",
     pch = 16, col = "blue")
```

Alamine_Aminotransferase,Aspartate_Aminotransferase attributes they seem to be correlated and their correlation is high.   


# create histogram to see the number of patients with liver disease
```{r}
hist(dataset$Dataset,
     col  = "blue", 
     xlab = "patients",    
     ylab = "count",      
     main = "patient with liver disease or no disease")
```

we can see from the plot that patients diagnosed with liver disease are almost 2x patients not diagnosed with liver disease in the dataset

# Create a bar plot
```{r}
barplot(table(dataset$Gender),
        ylab = "Frequency",
        xlab = "Gender",
        col =" blue")
```
we can see from the plot that female patients are less than half the number of male patients


# data preprocessing

# encoding cateogrial value (gender)
convert the gender value to numeric to make classification easier
```{r}
dataset$Gender[dataset$Gender == "Male"] <- 0
dataset$Gender[dataset$Gender == "Female"] <- 1
```


# normalize all numeric attributes
since the range for each attribute is quite different we decided it was best to normalize the attributes and unify their scale
```{r}
normalize <- function(x) {return ((x - min(x)) / (max(x) - min(x)))}
dataset$Total_Bilirubin = normalize(dataset$Total_Bilirubin)
dataset$Direct_Bilirubin = normalize(dataset$Direct_Bilirubin)
dataset$Alkaline_Phosphotase = normalize(dataset$Alkaline_Phosphotase)
dataset$Alamine_Aminotransferase = normalize(dataset$Alamine_Aminotransferase)
dataset$Aspartate_Aminotransferase = normalize(dataset$Aspartate_Aminotransferase)
dataset$Total_Protiens = normalize(dataset$Total_Protiens)
dataset$Albumin = normalize(dataset$Albumin)
dataset$Albumin_and_Globulin_Ratio = normalize(dataset$Albumin_and_Globulin_Ratio)
```

# print dataset after encoding and normalization
```{r}
print(dataset)
```

